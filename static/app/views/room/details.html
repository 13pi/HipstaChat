
<section class="page-form-ele page">
    <br>
    <div class="row">
        <div class="col-md-{{messengesColumn}} col-lg-8">

            <div ng-if="isDebugMode()">
                {{currentRoomMessages}}
            </div>






                <div class="panel panel-info">
                    <div class="panel-heading">
                       История сообщений | <button class="btn btn-primary">
                        <i class="fa fa-dashboard"></i><span data-i18n="Настройки"
                                                                         content-template="templates/roomSettings.html"
                                                                         data-placement="right" data-animation="am-slide-right"
                                                                         data-container="body" bs-aside="scope"
                            > Настройки </span>
                    </button>   <br/>

                    </div>
                    <div class="panel-body">

                        <div ng-if="currentRoomMessages.length == 0">
                            <div class="callout callout-warning">
                                <h4>сообщений нет</h4>
                                <p>будьте первыми!</p>
                            </div>
                        </div>

                        <ul class="media-list " ng-class="{'conversationWrap' : useScrollable }">

                            <li class="media" ng-repeat="mess in currentRoomMessages | reverseCus:({'revBoolVal':reverseBool}) ">

                                <div class="media-body">

                                    <div class="media">

                                        <a class="pull-left" href="#">
                                            [ {{$index+1}} ]
                                            <div ng-if="resolveUser(mess.sender).avatarUrl != ''">
                                                <img class="media-object img-circle " width="70" height="70" src="{{resolveUser(mess.sender).avatarUrl}}" />

                                            </div>

                                            <div ng-if="resolveUser(mess.sender).avatarUrl == ''">
                                                <img class="media-object img-circle  " src="assets/img/user.png" />
                                            </div>
                                        </a>
                                        <div class="media-body" >
                                            {{mess.text}}
                                            <br />
                                            <small class="text-muted">  {{ printUser ( resolveUser(mess.sender) ) }}  | {{  timeConverter( mess.date )}}</small>
                                            <hr />
                                        </div>
                                    </div>

                                </div>
                            </li>



                        </ul>
                        <div class="text-center">
                            <button class="btn btn-info" ng-click="getFromHistory()">получить еще 20 записей</button>
                        </div>


                    </div>



                    <div class="panel-footer">
                        <div class="input-group form-horizontal">

                            <textarea ng-model="messageToConversation"
                                      ng-show="enterSendBtn"
                                      ng-enter="addMessageToConversation()"
                                      class="form-control textarea-fill-all-parent" placeholder="введите сообщение">
                                      </textarea>


                             <textarea ng-model="messageToConversation"
                                       ng-show="!enterSendBtn"
                                       class="form-control textarea-fill-all-parent" id="textareaWithMsg" placeholder="введите сообщение">
                                       </textarea>

                                    <span class="input-group-btn">
                                        <button  class="btn btn-info btn-lg " ng-click="addMessageToConversation()" id="btnSendMsg" style="padding: 5px; height:100%;">Отправить</button>
                                    </span>
                        </div>
                    </div>
                </div>
            </div>





        <div class="col-md-{{membersColumn}} col-lg-4">

            <div class="row">
                <div class="col-md-8">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            Участники
                        </div>
                        <div class="panel-body">
                            <ul class="media-list">

                                <li class="media" ng-repeat="member in currentRoom.members">

                                    <div class="media-body">

                                        <div class="media">
                                            <a class="pull-left" href="#">

                                                <div ng-if="resolveUser(member).avatarUrl != ''">
                                                    <img class="media-object img-circle " width="70" height="70" src="{{resolveUser(member).avatarUrl}}" />

                                                </div>

                                                <div ng-if="resolveUser(member).avatarUrl == ''">
                                                    <img class="media-object img-circle  " src="assets/img/user.png" />
                                                </div>

                                            </a>
                                            <div class="media-body" >
                                                <h5>
                                                    <!--От Id: {{mess.sender}}-->
                                                    <!--{{  timeConverter( mess.date )}}-->

                                                    {{member.id}}
                                                </h5>

                                                <small class="text-muted">
                                                    {{printUser(resolveUser(member)) }}
                                                </small>

                                                <br />
                                                <small class="text-muted">    {{  timeConverter(resolveUser(member).lastOnlineDate )}}</small>

                                                <button ng-click="deleteMemberFromChat(member)" class="btn btn-danger btn-sm"> выгнать </button>
                                                <hr />

                                            </div>
                                        </div>

                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>




            </div>





            </div>


        </div>


    </div>


</section>


