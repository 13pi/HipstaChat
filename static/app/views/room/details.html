<style>

    .conversationWrap
    {
        box-shadow: -2px 0 3px #ddd;
        padding:0;
        max-height: 400px;
        overflow: auto;
        padding: 10px;;
    }
    .conversation
    {
        padding:5px;
        border-bottom:1px solid #ddd;
        margin:0;

    }

    .message-wrap
    {
        box-shadow: 0 0 3px #ddd;
        padding:0;

    }
    .msg
    {
        padding:5px;
        /*border-bottom:1px solid #ddd;*/
        margin:0;
    }
    .msg-wrap
    {
        padding:10px;
        max-height: 400px;
        overflow: auto;

    }

    .time
    {
        color:#bfbfbf;
    }

    .send-wrap
    {
        border-top: 1px solid #eee;
        border-bottom: 1px solid #eee;
        padding:10px;
        /*background: #f8f8f8;*/
    }

    .send-message
    {
        resize: none;
    }

    .highlight
    {
        background-color: #f7f7f9;
        border: 1px solid #e1e1e8;
    }

    .send-message-btn
    {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
        border-bottom-left-radius: 0;

        border-bottom-right-radius: 0;
    }
    .btn-panel
    {
        background: #f7f7f9;
    }

    .btn-panel .btn
    {
        color:#b8b8b8;

        transition: 0.2s all ease-in-out;
    }

    .btn-panel .btn:hover
    {
        color:#666;
        background: #f8f8f8;
    }
    .btn-panel .btn:active
    {
        background: #f8f8f8;
        box-shadow: 0 0 1px #ddd;
    }

    .btn-panel-conversation .btn,.btn-panel-msg .btn
    {

        background: #f8f8f8;
    }
    .btn-panel-conversation .btn:first-child
    {
        border-right: 1px solid #ddd;
    }

    .msg-wrap .media-heading
    {
        color:#003bb3;
        font-weight: 700;
    }


    .msg-date
    {
        background: none;
        text-align: center;
        color:#aaa;
        border:none;
        box-shadow: none;
        border-bottom: 1px solid #ddd;
    }


    body::-webkit-scrollbar {
        width: 12px;
    }


    /* Let's get this party started */
    ::-webkit-scrollbar {
        width: 6px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
        /*        -webkit-border-radius: 10px;
                border-radius: 10px;*/
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        /*        -webkit-border-radius: 10px;
                border-radius: 10px;*/
        background:#ddd;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
    }
    ::-webkit-scrollbar-thumb:window-inactive {
        background: #ddd;
    }
</style>


<section class="page-form-ele page">
    <br>
    <div class="row">
        <div class="col-md-{{messengesColumn}} col-lg-6">

            <div ng-if="isDebugMode()">
                {{currentRoomMessages}}
            </div>




            <div class="col-md-12">

                <!--<div class="row">-->
                    <!--<div class="col-md-6">-->
                        <!--Колонка сообщений [0-12]-->
                    <!--</div>-->

                    <!--<div class="col-md-6">-->
                        <!--<input type="text" ng-model="messengesColumn" class="form-control">-->
                    <!--</div>-->


                    <!--<div class="col-md-6">-->
                        <!--Колонка настроек [0-12]-->
                    <!--</div>-->

                    <!--<div class="col-md-6">-->
                        <!--<input type="text" ng-model="membersColumn" class="form-control">-->
                    <!--</div>-->
                <!--</div>-->



                <div class="panel panel-info">
                    <div class="panel-heading">
                       История сообщений | <label class="ui-checkbox">
                        <input name="checkbox1" type="checkbox" ng-model="useScrollable"><span> Использовать scrollbar </span></label>
                    </div>
                    <div class="panel-body">

                        <div ng-if="currentRoomMessages.length == 0">
                            <div class="callout callout-warning">
                                <h4>сообщений нет</h4>
                                <p>будьте первыми!</p>
                            </div>
                        </div>

                        <ul class="media-list " ng-class="{'conversationWrap' : useScrollable }">

                            <li class="media" ng-repeat="mess in currentRoomMessages">

                                <div class="media-body">

                                    <div class="media">

                                        <a class="pull-left" href="#">
                                            [ {{$index+1}} ]
                                            <div ng-if="resolveUser(mess.sender).avatarUrl != ''">
                                                <img class="media-object img-circle " width="70" height="70" src="{{resolveUser(mess.sender).avatarUrl}}" />

                                            </div>

                                            <div ng-if="resolveUser(mess.sender).avatarUrl == ''">
                                                <img class="media-object img-circle  " src="assets/img/user.png" />
                                            </div>
                                        </a>
                                        <div class="media-body" >
                                            {{mess.text}}
                                            <br />
                                            <small class="text-muted">  {{ printUser ( resolveUser(mess.sender) ) }}  | {{  timeConverter( mess.date )}}</small>
                                            <hr />
                                        </div>
                                    </div>

                                </div>
                            </li>



                        </ul>
                        <div class="text-center">
                            <button class="btn btn-info" ng-click="getFromHistory()">получить еще 20 записей</button>
                        </div>


                    </div>



                    <div class="panel-footer">
                        <div class="input-group">

                            <textarea ng-model="messageToConversation" class="form-control textarea-fill-all-parent" placeholder="введите сообщение"></textarea>
                            <!--<input type="text" class="form-control"  />-->
                                    <span class="input-group-btn">
                                        <button class="btn btn-info btn-lg" ng-click="addMessageToConversation()" style="padding: 5px;">Отправить</button>
                                        <!--<button class="btn btn-info" type="button">SEND</button>-->
                                    </span>
                        </div>
                    </div>
                </div>
            </div>


        </div>




        <div class="col-md-{{membersColumn}} col-lg-6">

            <div class="row">
                <div class="col-md-4">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            Участники
                        </div>
                        <div class="panel-body">
                            <ul class="media-list">

                                <li class="media" ng-repeat="member in currentRoom.members">

                                    <div class="media-body">

                                        <div class="media">
                                            <a class="pull-left" href="#">

                                                <div ng-if="resolveUser(member).avatarUrl != ''">
                                                    <img class="media-object img-circle " width="70" height="70" src="{{resolveUser(member).avatarUrl}}" />

                                                </div>

                                                <div ng-if="resolveUser(member).avatarUrl == ''">
                                                    <img class="media-object img-circle  " src="assets/img/user.png" />
                                                </div>

                                            </a>
                                            <div class="media-body" >
                                                <h5>
                                                    <!--От Id: {{mess.sender}}-->
                                                    <!--{{  timeConverter( mess.date )}}-->

                                                    {{member.id}}
                                                </h5>

                                                <small class="text-muted">
                                                    {{printUser(resolveUser(member)) }}
                                                </small>

                                                <br />
                                                <small class="text-muted">    {{  timeConverter(resolveUser(member).lastOnlineDate )}}</small>

                                                <button ng-click="deleteMemberFromChat(member)" class="btn btn-danger btn-sm"> выгнать </button>
                                                <hr />

                                            </div>
                                        </div>

                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>


                <div class="col-md-8">
                    <section class="panel panel-primary">
                        <div class="panel-heading"><span class="glyphicon glyphicon-th"></span> Настройки <b> </b></div>
                        <div class="panel-body text-center">

                            <div class="panel-body text-center">

                                <div class="row">
                                    <div class="col-md-4">
                                        Название комнаты
                                    </div>

                                    <div class="col-md-4">
                                        <input type="text"   ng-model="newRoomName" class="form-control">
                                    </div>

                                    <div class="col-md-4">
                                        <button ng-click="changeRoomName()" class="btn btn-success"> сменить название</button>
                                    </div>
                                </div>


                                <hr/>


                                <div class="col-md-12"></div>


                                <div class="col-md-6">
                                    Владелец
                                </div>

                                <div class="col-md-6">
                                    <a href="#/user/details/{{currentRoom.owner}}"> (   {{printUser(resolveUser(currentRoom.owner)) }}  ) </a>
                                </div>
                                <br/>
                                <hr/>
                                <br/> <br/>


                                <div ng-if="isDebugMode()">
                                    {{getAccountListFullResult}}
                                </div>

                                <table class="table table-bordered table-stripped"  >
                                    <thead>
                                    <tr>
                                        <th>№</th>
                                        <th>Имя</th>
                                        <th>Добавить</th>
                                        <!--<th>выгнать</th>-->
                                    </tr>
                                    </thead>
                                    <tbody>


                                    <tr ng-repeat="project in getAccountListFullResult | filter:alreadyInChatFilter as filteredContactList">
                                        <td  class="col-md-1" >{{$index+1}}</td>
                                        <!--<td > {{project.id}} </td>-->
                                        <td >
                                            {{printUser(project) }}
                                            <!--{{project.firstName}}  {{project.lastName}} (  {{ project.nickName}}  )-->
                                        </td>
                                        <td>  <button ng-click="addMemberToChat(project.id)" class="btn btn-success"> добавить в чат</button>    </td>
                                        <!--<td>  <button ng-click="deleteMemberFromChat(project.id)" class="btn btn-danger"> выгнать </button>    </td>-->
                                    </tr>


                                    </tbody>
                                </table>


                                <div ng-if="filteredContactList.length == 0">
                                    <div class="callout callout-warning">
                                        <h4>людей из контакт листа нет</h4>
                                        <p>все люди из вашего контакт-листа уже в этом чате!</p>
                                    </div>
                                </div>





                            </div>

                        </div>
                    </section>
                </div>

            </div>





            </div>


        </div>


    </div>


</section>


